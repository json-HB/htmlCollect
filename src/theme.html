<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>theme</title>
    <style>
      .border {
        border: 2px solid #ccc;
        width: 50px;
        height: 50px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="border">
      hello world
    </div>
    <label for="">red</label>
    <input type="radio" name="theme" data-type="a" />
    <input type="radio" name="theme" data-type="b" />
    <script>
      function preload() {
        ["a", "b"].forEach(item => {
          let l = document.createElement("link");
          l.href = `${item}.css`;
          l.rel = "stylesheet alternate";
          l.title = "disabled";
          l.type = "text/css";
          document.head.appendChild(l);
          l.addEventListener("load", () => {
            console.log(`loading`);
          });
        });
      }
      window.onload = function() {
        preload();
        let radios = document.querySelectorAll("input");
        let links = document.querySelectorAll("link[rel*='stylesheet']");
        Array.from(radios).forEach(item => {
          item.addEventListener("change", function(ev) {
            const type = ev.target.dataset.type;
            Array.from(links).forEach(l => {
              l.disabled = true;
              if (l.getAttribute("href").includes(type)) {
                l.disabled = false;
              }
            });
          });
        });
      };
    </script>
  </body>
</html>
